/*! pycollections.js 17-07-2015 */
!function(a){"use strict";var b=function(a){a?(this.keyWasSupplied=!0,this.key=a):this.keyWasSupplied=!1},c=function(a){this.key=a},d=typeof!0,e=String(NaN),f=String(null),g="number",h="string",i="undefined",j={};j[d]=!0,j[e]=!0,j[f]=!0,j[g]=!0,j[h]=!0,j[i]=!0,Number.isNaN||(Number.isNaN=function(a){return a!=a}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});var k=function(a){return null===a?f:Number.isNaN(a)?e:typeof a},l=function(a){this.clear(),void 0!==a&&this.update(a)};l.fromKeys=function(a,b){for(var c=new l,d=0,e=a.length;e>d;d++)c.set(a[d],b);return c},l.checkKeyIsHashable_=function(a){if(!j[k(a)])throw new c(a)},l.prototype.clear=function(){var a={};for(var b in j)a[b]={};this.dict_=a},l.prototype.copy=function(){return new l(this)},l.prototype.set=function(a,b){if(l.checkKeyIsHashable_(a),arguments.length<2)throw Error("Must supply a key and a value.");return this.dict_[k(a)][a]=b},l.prototype.update=function(a){var b=this.set.bind(this);if(a instanceof l)a.iteritems(b);else if(Array.isArray(a))for(var c=0,d=a.length;d>c;c++){var e=a[c];b(e[0],e[1])}else{if("object"!=typeof a)throw Error("Cannot update dict from type: "+typeof a);var f=Object.keys(a);for(c=0,d=f.length;d>c;c++){var g=f[c];b(g,a[g])}}},l.prototype.hasKey=function(a){return l.checkKeyIsHashable_(a),this.dict_[k(a)].hasOwnProperty(a)},l.prototype.get=function(a,c){var d=arguments.length;if(!d)throw Error("Must supply a key");l.checkKeyIsHashable_(a);var e=this.hasKey(a);if(1===d&&!e)throw new b(a);return e?this.dict_[k(a)][a]:c},l.prototype.del=function(a){if(l.checkKeyIsHashable_(a),!this.hasKey(a))throw new b(a);delete this.dict_[k(a)][a]},l.prototype.pop=function(a,c){l.checkKeyIsHashable_(a);var d=this.hasKey(a);if(1===arguments.length&&!d)throw new b(a);var e=this.get(a,c);return d&&this.del(a),e},l.prototype.iterkeys=function(a){var b,c=this.dict_;for(b in c[d])a("true"===b?!0:!1,this);for(b in c[g])a(Number(b),this);for(b in c[h])a(b,this);Object.keys(c[e]).length&&a(NaN,this),Object.keys(c[f]).length&&a(null,this),Object.keys(c[i]).length&&a(void 0,this)},l.prototype.keys=function(){var a=[];return this.iterkeys(function(b){a.push(b)}),a},l.prototype.getFirstKey=function(){var a,c=!1;if(this.iterkeys(function(b){c||(a=b,c=!0)}),!c)throw new b;return a},l.prototype.getFirstMatchingKey=function(a){var c,d=!1;if(this.iterkeys(function(b,e){!d&&a(b,e)&&(c=b,d=!0)}),!d)throw new b;return c},l.prototype.popitem=function(){var a=this.getFirstKey();return[a,this.pop(a)]},l.prototype.length=function(){var a=0;return this.iterkeys(function(){a++}),a},l.prototype.isEmpty=function(){return!this.length()},l.prototype.iteritems=function(a){this.iterkeys(function(b,c){a(b,c.get(b),c)})},l.prototype.items=function(){var a=[];return this.iteritems(function(b,c){a.push([b,c])}),a},l.prototype.itervalues=function(a){this.iterkeys(function(b,c){a(c.get(b),c)})},l.prototype.values=function(){var a=[];return this.itervalues(function(b){a.push(b)}),a},l.prototype.setOneNewValue=function(a,b){return this.set(a,b(this.get(a),a,this))},l.prototype.setSomeNewValues=function(a,b){for(var c=0,d=a.length;d>c;c++)this.setOneNewValue(a[c],b)},l.prototype.setAllNewValues=function(a){this.iterkeys(function(b,c){c.setOneNewValue(b,a)})};var m=function(a,b){if("function"!=typeof a)throw Error("Must supply a default function.");this.default_=a,l.call(this,b)};m.prototype.constructor=l,m.prototype=Object.create(l.prototype),m.prototype.get=function(a){return arguments.length>1?l.prototype.get.apply(this,arguments):(l.checkKeyIsHashable_(a),this.hasKey(a)?l.prototype.get.call(this,a):this.set(a,this.default_()))};var n=function(a){m.call(this,function(){return 0},a)};n.constructor=m,n.prototype=Object.create(m.prototype),n.getIncrementor=function(a){return function(b){return b+a}},n.fromKeys=function(){throw Error("Not implemented on Counter.")},n.prototype.update=function(a){var b=a instanceof l,c=Array.isArray(a),d=!c&&!b&&"object"==typeof a;if(this.isEmpty()&&(b||d))return m.prototype.update.call(this,a);if(b){var e=this;a.iteritems(function(a,b){e.setOneNewValue(a,n.getIncrementor(b))})}else if(c)this.setSomeNewValues(a,n.getIncrementor(1));else if(d)for(var f=Object.keys(a),g=0,h=f.length;h>g;g++){var i=f[g];this.setOneNewValue(i,n.getIncrementor(a[i]))}else m.prototype.update.call(this,a)},n.prototype.iterelements=function(a){this.iteritems(function(b,c,d){for(var e=0;c>e;e++)a(b,e,c,d)})},n.prototype.elements=function(){var a=[];return this.iterelements(function(b){a.push(b)}),a},n.prototype.subtract=function(a){if(a instanceof l){var b=this;a.iteritems(function(a,c){b.setOneNewValue(a,n.getIncrementor(-c))})}else if(Array.isArray(a))this.setSomeNewValues(a,n.getIncrementor(-1));else{if("object"!=typeof a)throw Error("Must subtract Dict, Array, or Object.");for(var c=Object.keys(a),d=0,e=c.length;e>d;d++){var f=c[d];this.setOneNewValue(f,n.getIncrementor(-a[f]))}}},n.prototype.mostCommon=function(a){var b=this.items().sort(function(a,b){return b[1]-a[1]});return arguments.length?b.slice(0,a):b},n.prototype.leastCommon=function(a){var b=this.items().sort(function(a,b){return a[1]-b[1]});return arguments.length?b.slice(0,a):b};var o={DictKeyNotFound:b,DictKeyNotHashable:c,Dict:l,DefaultDict:m,Counter:n};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=o),exports.pycollections=o):"function"==typeof define&&define.amd?define("pycollections",[],function(){return o}):a.pycollections=o}(this);