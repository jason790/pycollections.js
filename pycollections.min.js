/*! pycollections.js 15-07-2015 */
!function(a){"use strict";var b=function(a){a?(this.keyWasSupplied=!0,this.key=a):this.keyWasSupplied=!1},c=function(a){this.key=a},d=typeof!0,e=String(NaN),f=String(null),g="number",h="string",i="undefined",j={};if(j[d]=!0,j[e]=!0,j[f]=!0,j[g]=!0,j[h]=!0,j[i]=!0,Number.isNaN)var k=Number.isNaN.bind(Number);else var k=function(a){return a!=a};var l=function(a){return null===a?f:k(a)?e:typeof a},m=function(a){this.clear(),void 0!==a&&this.update(a)};m.fromKeys=function(a,b){for(var c=new m,d=0,e=a.length;e>d;d++)c.set(a[d],b);return c},m.checkKeyIsHashable_=function(a){if(!j[l(a)])throw new c(a)},m.prototype.clear=function(){var a={};for(var b in j)a[b]={};this.dict_=a},m.prototype.copy=function(){return new m(this)},m.prototype.set=function(a,b){if(m.checkKeyIsHashable_(a),arguments.length<2)throw Error("Must supply a key and a value.");return this.dict_[l(a)][a]=b},m.prototype.update=function(a){var b=this.set.bind(this);if(a instanceof m)a.iteritems(b);else if(a instanceof Array)for(var c=0,d=a.length;d>c;c++){var e=a[c];b(e[0],e[1])}else{if("object"!=typeof a)throw Error("Cannot update dict from type: "+typeof a);var f=Object.keys(a);for(c=0,d=f.length;d>c;c++){var g=f[c];b(g,a[g])}}},m.prototype.hasKey=function(a){return m.checkKeyIsHashable_(a),this.dict_[l(a)].hasOwnProperty(a)},m.prototype.get=function(a,c){var d=arguments.length;if(!d)throw Error("Must supply a key");m.checkKeyIsHashable_(a);var e=this.hasKey(a);if(1===d&&!e)throw new b(a);return e?this.dict_[l(a)][a]:c},m.prototype.del=function(a){if(m.checkKeyIsHashable_(a),!this.hasKey(a))throw new b(a);delete this.dict_[l(a)][a]},m.prototype.pop=function(a,c){m.checkKeyIsHashable_(a);var d=this.hasKey(a);if(1===arguments.length&&!d)throw new b(a);var e=this.get(a,c);return d&&this.del(a),e},m.prototype.iterkeys=function(a){var b,c=this.dict_;for(b in c[d])a("true"===b?!0:!1,this);for(b in c[g])a(Number(b),this);for(b in c[h])a(b,this);Object.keys(c[e]).length&&a(NaN,this),Object.keys(c[f]).length&&a(null,this),Object.keys(c[i]).length&&a(void 0,this)},m.prototype.keys=function(){var a=[];return this.iterkeys(function(b){a.push(b)}),a},m.prototype.getFirstKey=function(){var a,c=!1;if(this.iterkeys(function(b){c||(a=b,c=!0)}),!c)throw new b;return a},m.prototype.getFirstMatchingKey=function(a){var c,d=!1;if(this.iterkeys(function(b,e){!d&&a(b,e)&&(c=b,d=!0)}),!d)throw new b;return c},m.prototype.popitem=function(){var a=this.getFirstKey();return[a,this.pop(a)]},m.prototype.length=function(){var a=0;return this.iterkeys(function(){a++}),a},m.prototype.isEmpty=function(){return!this.length()},m.prototype.iteritems=function(a){this.iterkeys(function(b,c){a(b,c.get(b),c)})},m.prototype.items=function(){var a=[];return this.iteritems(function(b,c){a.push([b,c])}),a},m.prototype.itervalues=function(a){this.iterkeys(function(b,c){a(c.get(b),c)})},m.prototype.values=function(){var a=[];return this.itervalues(function(b){a.push(b)}),a},m.prototype.setOneNewValue=function(a,b){return this.set(a,b(this.get(a),a,this))},m.prototype.setSomeNewValues=function(a,b){for(var c=0,d=a.length;d>c;c++)this.setOneNewValue(a[c],b)},m.prototype.setAllNewValues=function(a){this.iterkeys(function(b,c){c.setOneNewValue(b,a)})};var n=function(a,b){if("function"!=typeof a)throw Error("Must supply a default function.");this.default_=a,m.call(this,b)};n.prototype.constructor=m,n.prototype=Object.create(m.prototype),n.prototype.get=function(a){return arguments.length>1?m.prototype.get.apply(this,arguments):(m.checkKeyIsHashable_(a),this.hasKey(a)?m.prototype.get.call(this,a):this.set(a,this.default_()))};var o=function(a){n.call(this,Number,a)};o.constructor=n,o.prototype=Object.create(n.prototype),o.getIncrementor=function(a){return function(b){return b+a}},o.fromKeys=function(){throw Error("Not implemented on Counter.")},o.prototype.update=function(a){var b=a instanceof m,c=a instanceof Array,d="object"==typeof a&&!c&&!b;if(this.isEmpty()&&(b||d))return n.prototype.update.call(this,a);if(b){var e=this;a.iteritems(function(a,b){e.setOneNewValue(a,o.getIncrementor(b))})}else if(c)this.setSomeNewValues(a,o.getIncrementor(1));else if(d)for(var f=Object.keys(a),g=0,h=f.length;h>g;g++){var i=f[g];this.setOneNewValue(i,o.getIncrementor(a[i]))}else n.prototype.update.call(this,a)},o.prototype.iterelements=function(a){this.iteritems(function(b,c,d){for(var e=0;c>e;e++)a(b,e,c,d)})},o.prototype.elements=function(){var a=[];return this.iterelements(function(b){a.push(b)}),a},o.prototype.subtract=function(a){if(a instanceof m){var b=this;a.iteritems(function(a,c){b.setOneNewValue(a,o.getIncrementor(-c))})}else if(a instanceof Array)this.setSomeNewValues(a,o.getIncrementor(-1));else{if("object"!=typeof a)throw Error("Must subtract Dict, Array, or Object.");for(var c=Object.keys(a),d=0,e=c.length;e>d;d++){var f=c[d];this.setOneNewValue(f,o.getIncrementor(-a[f]))}}},o.prototype.mostCommon=function(a){var b=this.items().sort(function(a,b){return b[1]-a[1]});return arguments.length?b.slice(0,a):b},o.prototype.leastCommon=function(a){var b=this.items().sort(function(a,b){return a[1]-b[1]});return arguments.length?b.slice(0,a):b};var p={DictKeyNotFound:b,DictKeyNotHashable:c,Dict:m,DefaultDict:n,Counter:o};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=p),exports.pycollections=p):"function"==typeof define&&define.amd?define("pycollections",[],function(){return p}):a.pycollections=p}(this);